<?xml version="1.0"?>
<launch>
    <!-- Quad Name -->
    <arg name="quad_name" default="hummingbird"/>
    <!-- "gazebo" or "arena" to indicate the environment-->
    <arg name="env" default="gazebo"/>

    <!-- MPC Parameters -->
    <arg name="t_mhe" default="0.5"/>
    <arg name="n_mhe" default="50"/>

    <!-- Use Data-Driven models to correct for unmodelled dynamics -->
    <!-- Model parameters are loaded via the (quad_name)_dmhe.yaml file -->
    <arg name="use_nn" default="False"/>

    <!-- Start Recording node to record MPC and MHE -->
    <arg name="record" default="False"/>


    <param name="environment" value="$(arg env)"/>
    <param name="quad_name" value="$(arg quad_name)"/>

    <node name="mhe" pkg="hybrid_mpc_mhe" type="mhe_node.py" output="screen">
        <rosparam file="$(find hybrid_mpc_mhe)/quads/$(arg quad_name)/$(arg quad_name)_kmhe.yaml"/>
        <param name="t_mhe" value="$(arg t_mhe)"/>
        <param name="n_mhe" value="$(arg n_mhe)"/>
        <param name="use_nn" value="$(arg use_nn)"/>
        <param name="mhe_type" value="kinematic"/>
    </node>

    <group if="$(eval arg('record'))">
        <node name="visualizer_node" pkg="hybrid_mpc_mhe" type="visualizer_node.py" output="screen"/>
    </group>

</launch>
